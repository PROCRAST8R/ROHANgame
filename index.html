<!DOCTYPE html>
<html>
<head>
  <title>Rohan & Totini Game</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: black;
    }
    canvas {
      display: block;
    }
  </style>
</head>

<body>
<canvas id="game"></canvas>

<script>
/* ================= SETUP ================= */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = 1920;
canvas.height = 1080;

/* ================= IMAGES ================= */
const boy = new Image();
boy.src = "https://i.postimg.cc/21s9yPVZ/image.png";

const girl = new Image();
girl.src = "https://i.postimg.cc/PCgVJBPP/image.png";

/* ================= PLAYER ================= */
let player = {
  x: 200,
  y: 750,
  w: 120,
  h: 180,
  vy: 0,
  jump: -25,
  onGround: true
};

const gravity = 1.2;
const groundY = 900;

/* ================= OBSTACLE ================= */
let obstacle = {
  x: 1920,
  y: 820,
  w: 100,
  h: 100,
  speed: 12
};

/* ================= GAME STATE ================= */
let score = 0;
let gameOver = false;
let win = false;

/* ================= CONTROLS ================= */
document.addEventListener("keydown", jump);
document.addEventListener("click", jump);

function jump() {
  if (player.onGround && !gameOver && !win) {
    player.vy = player.jump;
    player.onGround = false;
  }
}

/* ================= GAME LOOP ================= */
function update() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  /* Background */
  ctx.fillStyle = "#87CEEB";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  /* Ground */
  ctx.fillStyle = "#3CB371";
  ctx.fillRect(0, groundY, canvas.width, canvas.height - groundY);

  /* Player physics */
  player.vy += gravity;
  player.y += player.vy;

  if (player.y >= groundY - player.h) {
    player.y = groundY - player.h;
    player.vy = 0;
    player.onGround = true;
  }

  /* Draw player */
  ctx.drawImage(boy, player.x, player.y, player.w, player.h);

  /* Obstacle move */
  if (!win) {
    obstacle.x -= obstacle.speed;
    if (obstacle.x < -obstacle.w) {
      obstacle.x = canvas.width + 200;
      score++;
    }
  }

  /* Draw obstacle */
  ctx.fillStyle = "#8B4513";
  ctx.fillRect(obstacle.x, obstacle.y, obstacle.w, obstacle.h);

  /* Collision */
  if (
    player.x < obstacle.x + obstacle.w &&
    player.x + player.w > obstacle.x &&
    player.y < obstacle.y + obstacle.h &&
    player.y + player.h > obstacle.y
  ) {
    gameOver = true;
  }

  /* Game Over */
  if (gameOver) {
    ctx.fillStyle = "black";
    ctx.font = "80px Arial";
    ctx.fillText("GAME OVER üòÖ", 700, 400);
    ctx.font = "40px Arial";
    ctx.fillText("Refresh to play again", 760, 480);
    return;
  }

  /* Win condition */
  if (score >= 5) {
    win = true;
    ctx.drawImage(girl, 1500, 700, 180, 220);
    ctx.fillStyle = "black";
    ctx.font = "80px Arial";
    ctx.fillText("PROPOSE SUCCESS ‚ù§Ô∏è", 550, 300);
    return;
  }

  /* Score */
  ctx.fillStyle = "black";
  ctx.font = "50px Arial";
  ctx.fillText("Score: " + score, 50, 80);

  requestAnimationFrame(update);
}

update();
</script>
</body>
</html>
